name: Git Repo Sync

on:
  - push
  - delete

jobs:
  sync:
    runs-on: ubuntu-latest
    name: Sync to GitLab
    steps:
    - name: Checkout ðŸšª
      uses: actions/checkout@v3
      with:
        fetch-depth: 0

    - name: GitLab ðŸ¦Š
      uses: wangchucheng/git-repo-sync@v0.1.0
      with:
        target-url: ${{ vars.GITLAB_URL }}
        target-username: ${{ vars.GITLAB_USERNAME }}
        target-token: ${{ secrets.GITLAB_SYNC_TOKEN }}

jobs:
  sync:
    runs-on: ubuntu-latest
    name: Sync to AWS CodeCommit
    steps:
    - name: Checkout ðŸšª
      uses: actions/checkout@v3
      with:
        fetch-depth: 0

    - name: AWS CodeCommit ðŸ“¦
      uses: wangchucheng/git-repo-sync@v0.1.0
      with:
        target-url: ${{ vars.CODECOMMIT_URL }}
        target-username: ${{ vars.CODECOMMIT_USERNAME }}
        target-token: ${{ secrets.CODECOMMIT_SYNC_TOKEN }}
